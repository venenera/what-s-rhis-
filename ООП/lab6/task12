#include  <iostream>
#include <string>
#include <sstream>
using namespace std;
class money
{
private:
	long double _sum;
public:
	money() {}
	money(long double sum) : _sum(sum) {}
	long double mstold(string sum)
	{
		string res = "";
		for (int i = 0; i < sum.length(); i++)
		{
			if (isdigit(sum[i]) || sum[i] == ',')
				res += sum[i];
		}
		return stold(res.c_str());
	}


	string ldtoms(long double sum)
	{
		if (sum > 9999999999999990.00) return "";
		ostringstream strs;
		strs << fixed << sum;
		string ustr = strs.str();
		string newstr = "$";
		int i, j;
		for (i = 0; i < ustr.length() && (ustr[i] == '0' || ustr[i] == '.'); i++);
		if (i > 1 && ustr[i - 1] == '.') i -= 2;
		if (i == ustr.length()) return "$0,00";
		for (j = ustr.length() - 1; j >= 0 && ustr[j] != '.'; j--);
		j += 2;
		for (; i <= j; i++)
		{
			if (i != 0 && i < j - 2 && (j - i + 1) % 3 == 0) 
				newstr += '.';
			newstr += ustr[i] == '.' ? ',' : ustr[i];
		}
		return newstr;
	}

	void getmoney()
	{
		string str;
		cout << "Введите денежную сумму:\n";
		cin >> str;
		_sum = mstold(str);
	}

	void putmoney()
	{
		cout << "Денежная сумма равна: " << ldtoms(_sum) << endl;
	}

	void add(money m)
	{
		_sum += m._sum;
	}
};
int main()
{
	setlocale(LC_ALL, "");
	money res(0), m;
	long double s;
	char ch;
	do
	{
		m.getmoney();
		res.add(m);
		cout << "Продолжить(y/n)? ";
		cin >> ch;
	} while (ch != 'n');
	res.putmoney();
	return 0;
}
